package ppodds.test.myfirstplugin;
import org.bukkit.command.Command;
import org.bukkit.command.CommandSender;
import org.bukkit.entity.Player;
//↑class(類別)存放的套件
import org.bukkit.plugin.java.JavaPlugin;
import org.bukkit.potion.PotionEffect;
import org.bukkit.potion.PotionEffectType;
//↑import 可以用來簡略一些東西 你IDE通常會幫你用 選一下除錯就好
//如果沒import就要打"完全符合名稱"
//補充:import可以使用萬用字元*來匯入該套件所有的class
public class MyFirstPlugin extends JavaPlugin
{
	// public宣告他是公用類別(權限最大)，想了解這方面要自己看書，這裡不講
	// ↑因為我們寫的是Java插件，所以要繼承JavaPlugin(Bukkit的API)
	// extends是Java的關鍵字，可以用來繼承類別。在Java中不能多重繼承
	// 如果你沒繼承，API的很多功能不能用，就不能被Bukkit執行了

	public void onEnable()
	{
		//void是指這個方法不會有傳回值，有些方法可以傳值
		//一般方法後面的()可以用來設定方法的參數
		/*-----------------------------------------------------------
　　　　		onEnable()這個"方法"在
　　　　		插件被讀取的時候會執行
　　　  		可以做一些程式的初始化
                                例子有很多，像是插件重讀的時候
                                把玩家資料全部讀到HashMap裡面
　　　　-------------------------------------------------------------*/
		getLogger().info("正在開啟...");
		//getLogger().info()會輸出訊息到cmd(黑盒子)
		//而且會幫你加入插件的名稱類似[MyFirstPlugin]
		//其實輸出正在開啟並無必要，Bukkit幫你用好了
		getLogger().info("Hello Bukkit!!!");
		getServer().getPluginManager().registerEvents(new PlayerJoin(), this);
	}

	public void onDisable()
	{
		/*-----------------------------------------------
　　　　onDisable()這個方法在伺服器結束
　　　　或重讀插件的時候會執行
　　　　可以執行存檔或資源釋放之類的工作
　　　　-------------------------------------------------*/
		getLogger().info("正在關閉...");
		//其實輸出正在關閉並無必要，Bukkit幫你用好了
	}
	
	//前面介紹過的指令語法
	public boolean onCommand(CommandSender sender,Command cmd,String lable,String args[])
	{
		//利用條件判斷式來檢驗指令
		//equals是用來比對字串是否完全一樣的
		//instanceof這個關鍵字可以拿來比對前者物件是否屬於後者類別物件
	    if (lable.equals("jump") && sender instanceof Player)
	    {
	    	//用條件判斷式判斷是否無參數length是用來取得陣列長度的
	    	if (args.length == 0)
	    	{
	    		//由於已經確定sender一定是Player，所以可以不理警告進行強制轉型來操作
	    		//p是名稱可以自由改，主要追求速度的話能短儘量短，但是如果多人共同開發的話太短會導致其他人看不懂喔!
	    		Player p = (Player) sender;
	    		//增加藥水效果給玩家
	    		//我這次用的addPotionEffect需要傳入1個參數(也有其他的同名方法，透過參數不同來呼叫，之後補充會說
	    		//參數是PotionEffect物件，有3個建構子可以使用，我使用的是最簡單的，只需傳入3個參數
	    		//第一個是PotionEffectType，他是以列舉宣告的，直接以下方式叫出來就好
	    		//第二個是持續時間，用Minecraft中的tick來做計量，20ticks等於1秒
	    		//最後一個是能力強度
	    		p.addPotionEffect(new PotionEffect(PotionEffectType.JUMP , 100 , 2));
	    	}
	    }


	    return false;
	}
}